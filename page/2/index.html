<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"louischerry.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.9.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>
<meta property="og:type" content="website">
<meta property="og:title" content="LouisCherry&#39;s Blog">
<meta property="og:url" content="https://louischerry.github.io/page/2/index.html">
<meta property="og:site_name" content="LouisCherry&#39;s Blog">
<meta property="og:locale">
<meta property="article:author" content="LouisCherry">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://louischerry.github.io/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-Hans","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>LouisCherry's Blog</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">LouisCherry's Blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">LouisCherry</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">23</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">41</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://louischerry.github.io/2022/06/15/2022-06-15-IDE%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F%E8%AE%B0%E5%BD%95%E4%B9%8BIntellij/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LouisCherry">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LouisCherry's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/06/15/2022-06-15-IDE%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F%E8%AE%B0%E5%BD%95%E4%B9%8BIntellij/" class="post-title-link" itemprop="url">IDE快捷方式记录之Intellij(Mac)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-06-15 06:56:30" itemprop="dateCreated datePublished" datetime="2022-06-15T06:56:30+08:00">2022-06-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-07-03 14:44:15" itemprop="dateModified" datetime="2022-07-03T14:44:15+08:00">2022-07-03</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="文本内操作"><a href="#文本内操作" class="headerlink" title="文本内操作"></a>文本内操作</h2><h2 id="多文本或者全局操作"><a href="#多文本或者全局操作" class="headerlink" title="多文本或者全局操作"></a>多文本或者全局操作</h2><h2 id="调试相关"><a href="#调试相关" class="headerlink" title="调试相关"></a>调试相关</h2><p>代码前一个位置：command+[<br>代码后一个位置：command+]</p>
<h2 id="本文涉及快捷方式Setting备份"><a href="#本文涉及快捷方式Setting备份" class="headerlink" title="本文涉及快捷方式Setting备份"></a>本文涉及快捷方式Setting备份</h2>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://louischerry.github.io/2022/06/08/2022-06-08-Redis%E5%90%84%E7%A7%8D%E6%9E%B6%E6%9E%84%E5%AE%9E%E8%B7%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LouisCherry">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LouisCherry's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/06/08/2022-06-08-Redis%E5%90%84%E7%A7%8D%E6%9E%B6%E6%9E%84%E5%AE%9E%E8%B7%B5/" class="post-title-link" itemprop="url">Redis各种架构实践(基于docker)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-06-08 23:11:54" itemprop="dateCreated datePublished" datetime="2022-06-08T23:11:54+08:00">2022-06-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-07-01 08:10:22" itemprop="dateModified" datetime="2022-07-01T08:10:22+08:00">2022-07-01</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="1-单机模式"><a href="#1-单机模式" class="headerlink" title="1 单机模式"></a>1 单机模式</h2><h3 id="1-1-不带配置文件"><a href="#1-1-不带配置文件" class="headerlink" title="1.1 不带配置文件"></a>1.1 不带配置文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name redis -p 6379:6379 -v /&lt;dir&gt;/docker/redis/data:/data redis --requirepass 123456</span><br></pre></td></tr></table></figure>

<h3 id="1-2-带配置文件"><a href="#1-2-带配置文件" class="headerlink" title="1.2 带配置文件"></a>1.2 带配置文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name redis -p 6379:6379 -v /&lt;dir&gt;/docker/redis/data:/data -v /&lt;dir&gt;/docker/redis/config/redis.conf:/etc/redis/redis.conf redis redis-server /etc/redis/redis.conf</span><br></pre></td></tr></table></figure>

<h2 id="2-主从复制"><a href="#2-主从复制" class="headerlink" title="2 主从复制"></a>2 主从复制</h2><h3 id="2-1不带配置文件"><a href="#2-1不带配置文件" class="headerlink" title="2.1不带配置文件"></a>2.1不带配置文件</h3><h4 id="2-1-1-master-主库"><a href="#2-1-1-master-主库" class="headerlink" title="2.1.1 master(主库)"></a>2.1.1 master(主库)</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 运行服务</span><br><span class="line">docker run -it --name redis-master -d -p 6300:6379 redis redis-server --requirepass 123456</span><br><span class="line"># 测试连接redis</span><br><span class="line">docker exec -it redis-master redis-cli -a 123456</span><br></pre></td></tr></table></figure>

<h5 id="2-1-2-slave-从库"><a href="#2-1-2-slave-从库" class="headerlink" title="2.1.2 slave(从库)"></a>2.1.2 slave(从库)</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 运行服务</span><br><span class="line">docker run -it --name redis-slave -d -p 6301:6379 redis redis-server --requirepass 123456</span><br><span class="line"># 测试连接redis</span><br><span class="line">docker exec -it redis-slave redis-cli -a 123456</span><br></pre></td></tr></table></figure>

<h4 id="2-1-3-从库配置-Docker环境下"><a href="#2-1-3-从库配置-Docker环境下" class="headerlink" title="2.1.3 从库配置(Docker环境下)"></a>2.1.3 从库配置(Docker环境下)</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#查询docker容器所对应的真是网络ip</span><br><span class="line">docker inspect &lt;containerid&gt;</span><br><span class="line"></span><br><span class="line">#进入slave</span><br><span class="line">docker exec -it redis-slave redis-cli -a 123456</span><br><span class="line">  </span><br><span class="line">slaveof &lt;master-ip&gt; &lt;master-port&gt;。&lt;master-ip&gt;为主库服务ip，&lt;master-port&gt;表示主库所在端口，默认6379 </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="2-1-4-密码认证"><a href="#2-1-4-密码认证" class="headerlink" title="2.1.4 密码认证"></a>2.1.4 密码认证</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config set masterauth &lt;master-password&gt;。&lt;master-password&gt;即为主库访问密码</span><br></pre></td></tr></table></figure>
<h4 id="2-1-5-测试命令"><a href="#2-1-5-测试命令" class="headerlink" title="2.1.5 测试命令"></a>2.1.5 测试命令</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#查看主从配置</span><br><span class="line">输入info或info Replication</span><br></pre></td></tr></table></figure>

<h3 id="2-2-带配置文件（重启后不失效）"><a href="#2-2-带配置文件（重启后不失效）" class="headerlink" title="2.2 带配置文件（重启后不失效）"></a>2.2 带配置文件（重启后不失效）</h3><blockquote>
<p>docker安装后，会默认三种网络类型。(bridge,none,host),不指定的清空下，默认是bridge ，此时默认IP为172.17.0.x<br>如果想把网络固定下来，需要设置自定义网络 参见：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/377236484">https://zhuanlan.zhihu.com/p/377236484</a></p>
</blockquote>
<h3 id="2-2-1-master-配置"><a href="#2-2-1-master-配置" class="headerlink" title="2.2.1 master 配置"></a>2.2.1 master 配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">在conf文件中，添加</span><br><span class="line"></span><br><span class="line">#1.&lt;固定密码&gt;</span><br><span class="line">requirepass 123456</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker network create --subnet=172.11.0.0/20 mynetwork</span><br><span class="line"></span><br><span class="line">#docker run -it --name redis-master -d -p 6300:6379 --ip 172.17.0.4  -v /&lt;dir&gt;/docker/redis/config/redis.conf:/etc/redis/redis.conf redis redis-server /etc/redis/redis.conf </span><br><span class="line"></span><br><span class="line">docker run -it --name redis-master -d -p 6300:6379 --net mynetwork --ip 172.11.0.4  -v /Users/panshunxing/docker/redis/config/replication/redis_master.conf:/etc/redis/redis.conf redis redis-server /etc/redis/redis.conf </span><br><span class="line"></span><br><span class="line"># 测试连接redis</span><br><span class="line">docker exec -it redis-master redis-cli -a 123456</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="2-2-1-slave-配置"><a href="#2-2-1-slave-配置" class="headerlink" title="2.2.1 slave 配置"></a>2.2.1 slave 配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">在conf文件中，添加</span><br><span class="line">&lt;固定密码&gt;</span><br><span class="line">requirepass 123456</span><br><span class="line"></span><br><span class="line">#replicaof &lt;masterip&gt; &lt;masterport&gt;</span><br><span class="line">replicaof 172.11.0.4 6379</span><br><span class="line"></span><br><span class="line">masterauth &lt;master-password&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name redis-slave -d -p 6301:6379 --ip 172.17.0.5  -v /&lt;dir&gt;/docker/redis/config/redis.conf:/etc/redis/redis.conf redis redis-server /etc/redis/redis.conf </span><br><span class="line"></span><br><span class="line">docker run -it --name redis-slave1 -d -p 6302:6379 --net mynetwork --ip 172.11.0.5  -v /Users/panshunxing/docker/redis/config/replication/redis_slave.conf:/etc/redis/redis.conf redis redis-server /etc/redis/redis.conf </span><br><span class="line"></span><br><span class="line">docker run -it --name redis-slave2 -d -p 6303:6379 --net mynetwork --ip 172.11.0.6  -v /Users/panshunxing/docker/redis/config/replication/redis_slave.conf:/etc/redis/redis.conf redis redis-server /etc/redis/redis.conf </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="3-哨兵模式"><a href="#3-哨兵模式" class="headerlink" title="3 哨兵模式"></a>3 哨兵模式</h2><h3 id="3-1最小化搭建"><a href="#3-1最小化搭建" class="headerlink" title="3.1最小化搭建"></a>3.1最小化搭建</h3><p>至少需要3个Sentinel实例，且3个实例应该在独立方式发生故障的不同的物理机或者虚拟机上。<br><image src="https://yqfile.alicdn.com/img_e64f47a8684956ef1de9f7c4a9ff4f07.png"></p>
<h3 id="3-2-先搭建一主，二从-（方法如主从复制）"><a href="#3-2-先搭建一主，二从-（方法如主从复制）" class="headerlink" title="3.2 先搭建一主，二从 （方法如主从复制）"></a>3.2 先搭建一主，二从 （方法如主从复制）</h3><p><img src="../images/2022-06-26/WX20220626-195804@2x.png"></p>
<h3 id="3-3-配置三个个sentinel"><a href="#3-3-配置三个个sentinel" class="headerlink" title="3.3 配置三个个sentinel"></a>3.3 配置三个个sentinel</h3><p>以下是一组 sentinel1.conf</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># sentinel monitor &lt;master-name&gt; &lt;ip&gt; &lt;redis-port&gt; &lt;quorum&gt;</span><br><span class="line"># mymaster:自定义集群名，如果需要监控多个redis集群，只需要配置多次并定义不同的&lt;master-name&gt; &lt;master-redis-ip&gt;:主库ip &lt;master-redis-port&gt;:主库port &lt;quorum&gt;:最小投票数，由于有三台redis-sentinel实例，所以可以设置成2</span><br><span class="line">sentinel monitor mymaster 172.17.0.4 6379 2</span><br><span class="line"></span><br><span class="line"># sentinel auth-pass &lt;master-name&gt; &lt;password&gt;</span><br><span class="line">sentinel auth-pass mymaster 123456</span><br><span class="line"># 实例不应该不能访问的时间（以毫秒为单位）可以访问 （要么不回复我们的 PING，要么回复 错误）</span><br><span class="line">sentinel down-after-milliseconds mymaster 30000</span><br><span class="line"></span><br><span class="line"># 设置可以重新配置使用的副本数 同时故障转移后的新主人。 数字越低， 完成故障转移过程需要更多时间</span><br><span class="line">sentinel parallel-syncs mymaster 1</span><br><span class="line"></span><br><span class="line"># 设置失败超时时间，默认三分钟</span><br><span class="line">sentinel failover-timeout mymaster 180000</span><br><span class="line"># 添加后台运行</span><br><span class="line">daemonize yes</span><br></pre></td></tr></table></figure>

<p>复制出另外两份 sentinel2.conf、 sentinel3.conf</p>
<blockquote>
<p>quorum 仲裁参数，代表需要几个哨兵发现主节点下线，才能投票选出新的主节点</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#修改 每一组哨兵的端口</span><br><span class="line">port &lt;sentinel-port&gt;</span><br></pre></td></tr></table></figure>
<p>sentinel1.conf、sentinel2.conf、 sentinel3.conf 监控端口分别设置为:26001,26002,26003</p>
<h3 id="3-4-启动sentinel"><a href="#3-4-启动sentinel" class="headerlink" title="3.4 启动sentinel"></a>3.4 启动sentinel</h3><blockquote>
<p>启动sentinel有两种方式：<br><br>redis-sentinel /path/to/sentinel.conf <br><br>redis-server /path/to/sentinel.conf –sentinel</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># redis-sentinel实例1</span><br><span class="line">docker run -it --name redis-sentinel1 --net mynetwork --ip 172.11.0.7 -v /Users/panshunxing/docker/redis/config/sentinel/sentinel1.conf:/usr/local/etc/redis/sentinel.conf -d redis /bin/bash</span><br><span class="line">    </span><br><span class="line"># redis-sentinel实例2</span><br><span class="line">docker run -it --name redis-sentinel2 --net mynetwork --ip 172.11.0.8 -v /Users/panshunxing/docker/redis/config/sentinel/sentinel2.conf:/usr/local/etc/redis/sentinel.conf -d redis /bin/bash</span><br><span class="line">    </span><br><span class="line"># redis-sentinel实例3</span><br><span class="line">docker run -it --name redis-sentinel3 --net mynetwork --ip 172.11.0.9 -v /Users/panshunxing/docker/redis/config/sentinel/sentinel3.conf:/usr/local/etc/redis/sentinel.conf -d redis /bin/bash</span><br><span class="line"></span><br><span class="line"># 进入sentinel</span><br><span class="line">docker exec -it redis-sentinel(x) bash</span><br><span class="line"></span><br><span class="line">docker exec -it redis-sentinel1 bash</span><br><span class="line">docker exec -it redis-sentinel2 bash</span><br><span class="line">docker exec -it redis-sentinel3 bash</span><br><span class="line"></span><br><span class="line"># 启动redis-sentinel</span><br><span class="line">redis-sentinel /usr/local/etc/redis/sentinel.conf</span><br></pre></td></tr></table></figure>
<h4 id="3-4-1-FAQ"><a href="#3-4-1-FAQ" class="headerlink" title="3.4.1 FAQ"></a>3.4.1 FAQ</h4><blockquote>
<p>redis-sentinel /usr/local/etc/redis/sentinel.conf 报错<br><img src="../images/2022-06-26/WX20220626-212634@2x.png"><br>解决：sentinel.conf 版本跟当前的版本不一致，使用redis-server -v 命令找到当前在用的redis版本，再下载匹配当前版本的conf</p>
</blockquote>
<h3 id="3-5-测试"><a href="#3-5-测试" class="headerlink" title="3.5 测试"></a>3.5 测试</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">连接并使用redis-sentinel API查看监控状况:</span><br><span class="line">redis-cli -p 26001 (26002 | 26003)</span><br><span class="line">sentinel master mymaster 或 sentinel slaves mymaster</span><br></pre></td></tr></table></figure>

<p>1.进入redis-master容器，休眠60秒redis服务：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it redis-master bash</span><br><span class="line">redis-cli -a &lt;redispassword&gt; -p &lt;port&gt; DEBUG sleep 60</span><br><span class="line"></span><br><span class="line">redis-cli -a 123456 -p 6379 DEBUG sleep 60</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2.进入redis-slave或redis-slave2容器，查看info Replication，可以看到master已经完成了切换。</p>
<h3 id="3-6-compose-配置"><a href="#3-6-compose-配置" class="headerlink" title="3.6 compose 配置"></a>3.6 compose 配置</h3>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://louischerry.github.io/2022/05/01/2022-05-01-Git%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LouisCherry">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LouisCherry's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/01/2022-05-01-Git%E5%AD%A6%E4%B9%A0/" class="post-title-link" itemprop="url">Git学习</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-05-01 16:52:25" itemprop="dateCreated datePublished" datetime="2022-05-01T16:52:25+08:00">2022-05-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-13 22:57:07" itemprop="dateModified" datetime="2023-09-13T22:57:07+08:00">2023-09-13</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="gitignore-常用规则总结"><a href="#gitignore-常用规则总结" class="headerlink" title="gitignore 常用规则总结"></a>gitignore 常用规则总结</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 1.忽略public下的所有目录及文件</span><br><span class="line">/public/*</span><br><span class="line"></span><br><span class="line"># 2.不忽略/public/assets，就是特例的意思，assets文件不忽略</span><br><span class="line">!/public/assets</span><br><span class="line"></span><br><span class="line"># 3.忽略具体的文件</span><br><span class="line">index.html</span><br><span class="line"></span><br><span class="line"># 4.忽略所有的java文件</span><br><span class="line">*.java</span><br><span class="line"></span><br><span class="line"># 5.忽略 a.java b.java</span><br><span class="line">[ab].java</span><br><span class="line"></span><br><span class="line"># 6.忽略 doc/ 目录及其所有子目录下的 .pdf 文件</span><br><span class="line">doc/**/*.pdf</span><br><span class="line"></span><br><span class="line"># 7.忽略 doc/notes.txt，但不忽略 doc/server/arch.txt</span><br><span class="line">doc/*.txt</span><br><span class="line"></span><br><span class="line"># 8.忽略任何目录下名为 target 的文件夹</span><br><span class="line">target/</span><br><span class="line"></span><br><span class="line"># 9.只忽略当前目录下的 TODO 文件，而不忽略 subdir/TODO文件</span><br><span class="line">/TODO</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="fork-代码之后，如何再更新-被fork的工程的代码"><a href="#fork-代码之后，如何再更新-被fork的工程的代码" class="headerlink" title="fork 代码之后，如何再更新 被fork的工程的代码"></a>fork 代码之后，如何再更新 被fork的工程的代码</h3><p>1.先用git remote -v命令先看一下自己的远程分支，在没有添加过远程分支的情况下，会是如下情况：</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/663a8ca76e507305eb3c816b26562482.png"></p>
<p>这里说明你只有一个别名为origin的远程仓库，你需要把你fork的源项目的仓库也加进来，需要使用如下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add upstream git@https://gitee.com/y_project/RuoYi.git</span><br></pre></td></tr></table></figure>

<p>这里的git remote add 是固定的，upstream是你给你fork的源项目起的别名，取什么自己随意； 最后面就是源项目的git仓库地址。</p>
<p>执行结束以后，再次运行git remote -v命令：</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/b0d7461ed076aafcd565463077aac8d2.png"></p>
<p>会出现了新的名为upstream的仓库。说明添加成功了。这时候就可以拉最新代码啦！</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git pull upstream dev</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>这里git pull是固定的，upstream是上面你自己起的源项目别名，dev就是你要拉取的源项目分支</p>
<p>参考资料：<br>1.<a target="_blank" rel="noopener" href="https://www.cnblogs.com/liuyuelinfighting/p/16206037.html">https://www.cnblogs.com/liuyuelinfighting/p/16206037.html</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://louischerry.github.io/2022/04/05/2022-04-05-Java%E8%AF%AD%E8%A8%80%E4%B8%AD%E4%B8%80%E4%BA%9B%E5%90%8D%E8%AF%8D%E7%BC%A9%E5%86%99%E8%A7%A3%E9%87%8A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LouisCherry">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LouisCherry's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/05/2022-04-05-Java%E8%AF%AD%E8%A8%80%E4%B8%AD%E4%B8%80%E4%BA%9B%E5%90%8D%E8%AF%8D%E7%BC%A9%E5%86%99%E8%A7%A3%E9%87%8A/" class="post-title-link" itemprop="url">Java语言中一些名词缩写解释</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-04-05 22:09:01 / Modified: 22:31:06" itemprop="dateCreated datePublished" datetime="2022-04-05T22:09:01+08:00">2022-04-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="JSR"><a href="#JSR" class="headerlink" title="JSR"></a>JSR</h2><p>JSR全称：Java Specification Requests，即Java规范提案。是一种标准</p>
<h3 id="重要的JSR"><a href="#重要的JSR" class="headerlink" title="重要的JSR"></a>重要的JSR</h3><h4 id="JSR133"><a href="#JSR133" class="headerlink" title="JSR133"></a>JSR133</h4><p>JSR 133: JavaTM Memory Model and Thread Specification Revision</p>
<p>Description:<br>The proposed specification describes the semantics of threads, locks,<br>volatile variables and data races.<br>This includes what has been referred to as the Java memory model</p>
<h2 id="JCP"><a href="#JCP" class="headerlink" title="JCP"></a>JCP</h2><p>全称：Java Community Process，是一个开放性组织</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://louischerry.github.io/2022/02/20/2022-02-20-Javadoc%E4%BD%BF%E7%94%A8Latex/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LouisCherry">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LouisCherry's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/20/2022-02-20-Javadoc%E4%BD%BF%E7%94%A8Latex/" class="post-title-link" itemprop="url">Javadoc使用Latex</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-02-20 12:27:49 / Modified: 12:52:17" itemprop="dateCreated datePublished" datetime="2022-02-20T12:27:49+08:00">2022-02-20</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="配置方法-javadoc-arguments"><a href="#配置方法-javadoc-arguments" class="headerlink" title="配置方法:javadoc arguments"></a>配置方法:javadoc arguments</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-encoding UTF-8 -charset UTF-8 --allow-script-in-comments -header &quot;&lt;script type=&#x27;text/javascript&#x27; src=&#x27;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&#x27;&gt;&lt;/script&gt;&quot;</span><br></pre></td></tr></table></figure>

<h2 id="Latex写法注意-Latex表达式"><a href="#Latex写法注意-Latex表达式" class="headerlink" title="Latex写法注意: (Latex表达式)"></a>Latex写法注意: (Latex表达式)</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">例如：\(\sum_i a_i\)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>缺点：依赖于在线资源<br>优点：比较方便</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://louischerry.github.io/2022/02/19/2022-02-19-%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-Array%E4%B8%93%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LouisCherry">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LouisCherry's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/19/2022-02-19-%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0-Array%E4%B8%93%E9%A2%98/" class="post-title-link" itemprop="url">算法学习-Array专题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-02-19 23:04:28 / Modified: 23:48:33" itemprop="dateCreated datePublished" datetime="2022-02-19T23:04:28+08:00">2022-02-19</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Array排序"><a href="#Array排序" class="headerlink" title="Array排序"></a>Array排序</h2><h2 id="有序数组搜索"><a href="#有序数组搜索" class="headerlink" title="有序数组搜索"></a>有序数组搜索</h2><h3 id="Java语言中，Arrays类中使用的排序-Arrays-sort-nums"><a href="#Java语言中，Arrays类中使用的排序-Arrays-sort-nums" class="headerlink" title="Java语言中，Arrays类中使用的排序 Arrays.sort(nums[]);"></a>Java语言中，Arrays类中使用的排序 Arrays.sort(nums[]);</h3>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://louischerry.github.io/2022/01/24/2022-01-24-JVM%E8%B0%83%E4%BC%98(%E4%B8%80)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LouisCherry">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LouisCherry's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/24/2022-01-24-JVM%E8%B0%83%E4%BC%98(%E4%B8%80)/" class="post-title-link" itemprop="url">JVM调优(一)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-01-24 21:36:22" itemprop="dateCreated datePublished" datetime="2022-01-24T21:36:22+08:00">2022-01-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-01-26 08:12:41" itemprop="dateModified" datetime="2022-01-26T08:12:41+08:00">2022-01-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>##JVM调优是为了解决哪些问题</p>
<p>1.一般是根据需求进行 JVM 规划和预调优</p>
<p>2.优化运行 JVM 运行环境（慢，卡顿）</p>
<p>3.解决JVM运行过程中出现的各种问题(OOM)</p>
<p>参考<br>1.<a target="_blank" rel="noopener" href="https://blog.csdn.net/Simon111Qiu/article/details/109409528">JVM调优-调优原则与思路</a><br>2.<a target="_blank" rel="noopener" href="https://www.oracle.com/java/technologies/javase/vmoptions-jsp.html">JVM参数调优参考</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://louischerry.github.io/2022/01/17/2022-01-18-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9F%A5%E8%AF%86%E5%A4%8D%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LouisCherry">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LouisCherry's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/17/2022-01-18-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9F%A5%E8%AF%86%E5%A4%8D%E4%B9%A0/" class="post-title-link" itemprop="url">多线程知识复习</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-01-17 23:09:22" itemprop="dateCreated datePublished" datetime="2022-01-17T23:09:22+08:00">2022-01-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-04-05 22:27:42" itemprop="dateModified" datetime="2022-04-05T22:27:42+08:00">2022-04-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="1-线程创建方式"><a href="#1-线程创建方式" class="headerlink" title="1.线程创建方式"></a>1.线程创建方式</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/LouisCherry/Jdk18Source/blob/master/src/com.test.source18/test/muiltythread/createthread/ThreadByExtend.java">通过继承Thread类。</a> </li>
<li><a target="_blank" rel="noopener" href="https://github.com/LouisCherry/Jdk18Source/blob/master/src/com.test.source18/test/muiltythread/createthread/ThreadImplementRunable.java">通过实现Runable接口。</a> </li>
<li><a target="_blank" rel="noopener" href="https://github.com/LouisCherry/Jdk18Source/blob/master/src/com.test.source18/test/muiltythread/createthread/ThreadImplementCallable.java">通过实现Callable接口。</a> </li>
<li>通过线程池创建线程。</li>
</ul>
<p>TODO 遗留问题：实现Runable接口和实现Callable接口有什么区别么</p>
<h2 id="2-多线程通信-wait、notify、notifyall"><a href="#2-多线程通信-wait、notify、notifyall" class="headerlink" title="2.多线程通信(wait、notify、notifyall)"></a>2.多线程通信(wait、notify、notifyall)</h2><h3 id="2-1-线程状态（与之对比的是线程池的状态）"><a href="#2-1-线程状态（与之对比的是线程池的状态）" class="headerlink" title="2.1.线程状态（与之对比的是线程池的状态）"></a>2.1.线程状态（与之对比的是线程池的状态）</h3><ul>
<li>New：新创建的线程，尚未执行；</li>
<li>Runnable：运行中的线程，正在执行run()方法的Java代码；</li>
<li>Blocked：运行中的线程，因为某些操作被阻塞而挂起；</li>
<li>Waiting：运行中的线程，因为某些操作在等待中；</li>
<li>Timed Waiting：运行中的线程，因为执行sleep()方法正在计时等待；</li>
<li>Terminated：线程已终止，因为run()方法执行完毕。</li>
</ul>
<p>用一个状态转移图表示如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">         ┌─────────────┐</span><br><span class="line">         │     New     │</span><br><span class="line">         └─────────────┘</span><br><span class="line">                │</span><br><span class="line">                ▼</span><br><span class="line">┌ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┐</span><br><span class="line"> ┌─────────────┐ ┌─────────────┐</span><br><span class="line">││  Runnable   │ │   Blocked   ││</span><br><span class="line"> └─────────────┘ └─────────────┘</span><br><span class="line">│┌─────────────┐ ┌─────────────┐│</span><br><span class="line"> │   Waiting   │ │Timed Waiting│</span><br><span class="line">│└─────────────┘ └─────────────┘│</span><br><span class="line"> ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─</span><br><span class="line">                │</span><br><span class="line">                ▼</span><br><span class="line">         ┌─────────────┐</span><br><span class="line">         │ Terminated  │</span><br><span class="line">         └─────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-2-Thread常用方法"><a href="#2-2-Thread常用方法" class="headerlink" title="2.2.Thread常用方法"></a>2.2.Thread常用方法</h3><p>wait、notify、notifyAll、（前面三个是Object自带方法）sleep、yield、interrupt、join、setDaemon</p>
<p>小tip:<br>守护线程依赖于主线程，主线程结束，守护线程必然结束。</p>
<h3 id="2-3-线程监控"><a href="#2-3-线程监控" class="headerlink" title="2.3.线程监控"></a>2.3.线程监控</h3><h4 id="工具使用：JVisualvm-amp-Jstack"><a href="#工具使用：JVisualvm-amp-Jstack" class="headerlink" title="工具使用：JVisualvm &amp; Jstack"></a>工具使用：JVisualvm &amp; Jstack</h4><p>JVisualvm 的作用：监控内存泄露，跟踪垃圾回收，执行时内存.cpu分析，线程分析</p>
<h3 id="2-4-实践thread怎么转换状态的"><a href="#2-4-实践thread怎么转换状态的" class="headerlink" title="2.4.实践thread怎么转换状态的"></a>2.4.实践thread怎么转换状态的</h3><h4 id="2-4-1-正常线程运行并结束"><a href="#2-4-1-正常线程运行并结束" class="headerlink" title="2.4.1.正常线程运行并结束"></a>2.4.1.<a target="_blank" rel="noopener" href="https://github.com/LouisCherry/Jdk18Source/blob/master/src/com.test.source18/test/muiltythread/threadstate/ThreadStateTest.java">正常线程运行并结束</a></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">      Main</span><br><span class="line"></span><br><span class="line">┌─────────────────┐            thread1</span><br><span class="line">│    RUNNABLE     │</span><br><span class="line">│                 │        ┌──────────────┐</span><br><span class="line">│                 │        │              │</span><br><span class="line">│                 │        │     NEW      │</span><br><span class="line">│                 │        │              │</span><br><span class="line">│                 │        └──────┬───────┘</span><br><span class="line">└────────┬────────┘               │</span><br><span class="line">         │                 ┌──────▼───────┐</span><br><span class="line">         │                 │              │</span><br><span class="line">         │                 │   RUNNABLE   │</span><br><span class="line">         │                 │              │</span><br><span class="line">         │ 2s              └──────┬───────┘</span><br><span class="line">         │                        │</span><br><span class="line">         │                 ┌──────▼───────┐</span><br><span class="line">         │                 │              │</span><br><span class="line">         │                 │  TERMINATED  │</span><br><span class="line">         │                 │              │</span><br><span class="line">         │                 └──────┬───────┘</span><br><span class="line">         │                        │</span><br><span class="line">         ▼                        ▼</span><br><span class="line">┌──────────────────┐             End</span><br><span class="line">│                  │</span><br><span class="line">│     RUNNABLE     │</span><br><span class="line">│                  │</span><br><span class="line">└────────┬─────────┘</span><br><span class="line">         │</span><br><span class="line">         │</span><br><span class="line">         ▼</span><br><span class="line">        End</span><br></pre></td></tr></table></figure>

<h4 id="2-4-2-线程中断"><a href="#2-4-2-线程中断" class="headerlink" title="2.4.2.线程中断"></a>2.4.2.线程中断</h4><p>中断分类：主动中断、被动中断<br>主动中断：wait(),Condition.await();volatile<br>被动中断：interrupt(基于约定)</p>
<h5 id="1-使用-interrupt-中断"><a href="#1-使用-interrupt-中断" class="headerlink" title="1.使用 interrupt 中断"></a>1.使用 interrupt 中断</h5><h2 id="3-锁"><a href="#3-锁" class="headerlink" title="3.锁"></a>3.锁</h2><h3 id="3-1-锁的种类"><a href="#3-1-锁的种类" class="headerlink" title="3.1.锁的种类"></a>3.1.锁的种类</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">                                                  +--------------------------+</span><br><span class="line">                                                  |否：乐观锁 StampedLock     |</span><br><span class="line">                                                  +--------------------------+</span><br><span class="line">                                +-------------+   ^</span><br><span class="line">                    +---------&gt; | 是否锁住资源+---+</span><br><span class="line">                    |           +-------------+   |</span><br><span class="line">                    |                             &lt;--------------------------+</span><br><span class="line">                    |                             |是：悲观锁 ReentrantLock   |</span><br><span class="line">                    |                             +--------------------------+</span><br><span class="line">                    |                                                            +------+</span><br><span class="line">                    |                                       +------------------&gt; | 阻塞 |</span><br><span class="line">                    |           +-------------------------+ |                    +------+</span><br><span class="line">                    +---------&gt; |锁住资源失败，是否阻塞线程+-+</span><br><span class="line">                    |           +-------------------------+ |                    +-----------------+</span><br><span class="line">                    |                                       +------------------&gt; |非阻塞：自旋锁:CAS|</span><br><span class="line">                    |                        +-----------------------------+     +-----------------+</span><br><span class="line">                    |                        |是：公平锁 ReentrantLock(true)|</span><br><span class="line">                    |                        &lt;-----------------------------+</span><br><span class="line">+--------------+    |           +--------+   |</span><br><span class="line">|  Java主流锁  +--------------&gt; |是否排队+---+</span><br><span class="line">+--------------+    |           +--------+   &lt;-----------------------------------------+</span><br><span class="line">                    |                        |否：非公平锁 synchronized 和 ReentrantLock|    +-----------------------------+</span><br><span class="line">                    |                        +-----------------------------------------+    |能：可重入锁 synchronized     |</span><br><span class="line">                    |                                                                    +&gt; +-----------------------------+</span><br><span class="line">                    |           +---------------------------------+                      |</span><br><span class="line">                    +---------&gt; |一个线程多个流程能否获得同一个锁 +----------------------+</span><br><span class="line">                    |           +---------------------------------+                      |</span><br><span class="line">                    |                                                                    |  +---------------+</span><br><span class="line">                    |                                                                    +&gt; |不能：非可重入锁|</span><br><span class="line">                    |                                                                       +---------------+</span><br><span class="line">                    |</span><br><span class="line">                    |                                             +---------+</span><br><span class="line">                    |                                 +---------&gt; |能：共享锁|</span><br><span class="line">                    |                                 |           +---------+</span><br><span class="line">                    |           +---------------------+</span><br><span class="line">                    +---------&gt; |多个线程能不能共享锁 |</span><br><span class="line">                                +---------------------+</span><br><span class="line">                                                      |           +-----------+</span><br><span class="line">                                                      +---------&gt; |不能：排他锁|</span><br><span class="line">                                                                  +-----------+</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-2-线程同步问题"><a href="#3-2-线程同步问题" class="headerlink" title="3.2.线程同步问题"></a>3.2.线程同步问题</h3><p>问题：如果多个线程同时读写共享变量，会出现数据不一致的问题。</p>
<h3 id="3-2-1-如何保障一个线程是安全的？"><a href="#3-2-1-如何保障一个线程是安全的？" class="headerlink" title="3.2.1.如何保障一个线程是安全的？"></a>3.2.1.如何保障一个线程是安全的？</h3><h3 id="3-2-2-synchronized"><a href="#3-2-2-synchronized" class="headerlink" title="3.2.2.synchronized"></a>3.2.2.synchronized</h3><p>特点：可重入锁<br>注意点是什么<br>有哪些常见类使用：Vector,HashTable,ConcurrentHashMap(1.8 Node 数组 + CAS + synchronized + volatile),StringBuffer</p>
<h4 id="TODO-3-2-2-1-synchronized-锁升级的过程是什么？"><a href="#TODO-3-2-2-1-synchronized-锁升级的过程是什么？" class="headerlink" title="TODO 3.2.2.1.synchronized 锁升级的过程是什么？"></a>TODO 3.2.2.1.synchronized 锁升级的过程是什么？</h4><h4 id="3-2-3-使用-volatile-修饰的标志位"><a href="#3-2-3-使用-volatile-修饰的标志位" class="headerlink" title="3.2.3.使用 volatile 修饰的标志位"></a>3.2.3.使用 volatile 修饰的标志位</h4><p>为什么不用普通变量：内存中的普通变量，修改后回写内存的时间不定<br>线程间共享变量需要使用volatile关键字标记，确保每个线程都能读取到更新后的变量值</p>
<h3 id="3-2-4-线程共享和线程互斥"><a href="#3-2-4-线程共享和线程互斥" class="headerlink" title="3.2.4.线程共享和线程互斥"></a>3.2.4.线程共享和线程互斥</h3><h4 id="3-2-4-1-CAS"><a href="#3-2-4-1-CAS" class="headerlink" title="3.2.4.1.CAS"></a>3.2.4.1.CAS</h4><h4 id="3-2-4-2-ABA问题"><a href="#3-2-4-2-ABA问题" class="headerlink" title="3.2.4.2.ABA问题"></a>3.2.4.2.ABA问题</h4><h3 id="3-4-ReentrantLock"><a href="#3-4-ReentrantLock" class="headerlink" title="3.4.ReentrantLock"></a>3.4.ReentrantLock</h3><p>特点：<br>和synchronized的区别:<br>wait、notifyall 和 Condition的 await()、signal()、signalAll()</p>
<h3 id="3-5-ReentrantLock"><a href="#3-5-ReentrantLock" class="headerlink" title="3.5 ReentrantLock"></a>3.5 ReentrantLock</h3><p>特点：允许多个线程同时读，但只要有一个线程在写，其他线程就必须等待<br>读的过程中不允许写，这是一种悲观的读锁</p>
<h3 id="3-6-StampedLock"><a href="#3-6-StampedLock" class="headerlink" title="3.6.StampedLock"></a>3.6.StampedLock</h3><p>特点：读的过程中也允许获取写锁后写入，是一种乐观锁</p>
<h3 id="3-7-使用Atomic"><a href="#3-7-使用Atomic" class="headerlink" title="3.7.使用Atomic"></a>3.7.使用Atomic</h3><h2 id="4-线程池"><a href="#4-线程池" class="headerlink" title="4.线程池"></a>4.线程池</h2><h3 id="4-1-创建线程池的方式"><a href="#4-1-创建线程池的方式" class="headerlink" title="4.1.创建线程池的方式"></a>4.1.创建线程池的方式</h3><h4 id="4-1-1-Executors"><a href="#4-1-1-Executors" class="headerlink" title="4.1.1.Executors"></a>4.1.1.Executors</h4><h4 id="4-1-2-ThreaPoolExecutor"><a href="#4-1-2-ThreaPoolExecutor" class="headerlink" title="4.1.2.ThreaPoolExecutor"></a>4.1.2.ThreaPoolExecutor</h4><h4 id="4-1-3-Executors和ThreaPoolExecutor创建线程池的区别"><a href="#4-1-3-Executors和ThreaPoolExecutor创建线程池的区别" class="headerlink" title="4.1.3.Executors和ThreaPoolExecutor创建线程池的区别"></a>4.1.3.Executors和ThreaPoolExecutor创建线程池的区别</h4><h3 id="4-2-遗留问题：实现Runable接口和实现Callable接口有什么区别么"><a href="#4-2-遗留问题：实现Runable接口和实现Callable接口有什么区别么" class="headerlink" title="4.2.遗留问题：实现Runable接口和实现Callable接口有什么区别么"></a>4.2.遗留问题：实现Runable接口和实现Callable接口有什么区别么</h3><p>Callable有返回值，可以用于线程池中submit()返回Future 来进行异步编程<br>实践:线程池异步编程(使用Future)</p>
<h4 id="4-2-1-CompletableFuture和Future有什么优势的地方"><a href="#4-2-1-CompletableFuture和Future有什么优势的地方" class="headerlink" title="4.2.1.CompletableFuture和Future有什么优势的地方"></a>4.2.1.CompletableFuture和Future有什么优势的地方</h4><p>实践：1.8以后引入的CompletableFuture</p>
<h3 id="4-3-Fork-Join"><a href="#4-3-Fork-Join" class="headerlink" title="4.3. Fork/Join"></a>4.3. Fork/Join</h3><h3 id="4-4-线程池拒绝策略"><a href="#4-4-线程池拒绝策略" class="headerlink" title="4.4.线程池拒绝策略"></a>4.4.线程池拒绝策略</h3><h2 id="5-一个线程中对象传递：ThreadLocal"><a href="#5-一个线程中对象传递：ThreadLocal" class="headerlink" title="5.一个线程中对象传递：ThreadLocal"></a>5.一个线程中对象传递：ThreadLocal</h2><p>参考资料：<br>1.<a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/1252599548343744/1306580742045730">廖雪峰的官方网站</a><br>2.javaSe8的官方API关于<a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.State.html">Thread.State</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://louischerry.github.io/2022/01/17/2022-01-17-%E6%90%AD%E5%BB%BA%E8%88%92%E9%80%82%E7%9A%84%E5%8D%9A%E5%AE%A2%E7%8E%AF%E5%A2%83%EF%BC%88%E4%BA%8C%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LouisCherry">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LouisCherry's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/17/2022-01-17-%E6%90%AD%E5%BB%BA%E8%88%92%E9%80%82%E7%9A%84%E5%8D%9A%E5%AE%A2%E7%8E%AF%E5%A2%83%EF%BC%88%E4%BA%8C%EF%BC%89/" class="post-title-link" itemprop="url">搭建舒适的博客环境(二)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-01-17 15:24:40 / Modified: 16:15:08" itemprop="dateCreated datePublished" datetime="2022-01-17T15:24:40+08:00">2022-01-17</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>##next主题配置（V8）<br>1.菜单设置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Menu Settings</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Usage: `Key: /link/ || icon`</span><br><span class="line"># Key is the name of menu item. If the translation for this item is available, the translated text will be loaded, otherwise the Key name will be used. Key is case-sensitive.</span><br><span class="line"># Value before `||` delimiter is the target link, value after `||` delimiter is the name of Font Awesome icon.</span><br><span class="line"># External url should start with http:// or https://</span><br><span class="line">menu:</span><br><span class="line">#home: / || fa fa-home</span><br><span class="line">#about: /about/ || fa fa-user</span><br><span class="line">#tags: /tags/ || fa fa-tags</span><br><span class="line">#categories: /categories/ || fa fa-th</span><br><span class="line">#archives: /archives/ || fa fa-archive</span><br><span class="line">#schedule: /schedule/ || fa fa-calendar</span><br><span class="line">#sitemap: /sitemap.xml || fa fa-sitemap</span><br><span class="line">#commonweal: /404/ || fa fa-heartbeat</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2.头像设置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Sidebar Avatar</span><br><span class="line">avatar:</span><br><span class="line">  # Replace the default image and set the url here.</span><br><span class="line">  url: #/images/avatar.gif</span><br><span class="line">  # If true, the avatar will be displayed in circle.</span><br><span class="line">  rounded: false</span><br><span class="line">  # If true, the avatar will be rotated with the cursor.</span><br><span class="line">  rotated: false</span><br></pre></td></tr></table></figure>

<p>3.社交账号设置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">social:</span><br><span class="line">#GitHub: https://github.com/yourname || fab fa-github</span><br><span class="line">#E-Mail: mailto:yourname@gmail.com || fa fa-envelope</span><br><span class="line">#Weibo: https://weibo.com/yourname || fab fa-weibo</span><br><span class="line">#Google: https://plus.google.com/yourname || fab fa-google</span><br><span class="line">#Twitter: https://twitter.com/yourname || fab fa-twitter</span><br><span class="line">#FB Page: https://www.facebook.com/yourname || fab fa-facebook</span><br><span class="line">#StackOverflow: https://stackoverflow.com/yourname || fab fa-stack-overflow</span><br><span class="line">#YouTube: https://youtube.com/yourname || fab fa-youtube</span><br><span class="line">#Instagram: https://instagram.com/yourname || fab fa-instagram</span><br><span class="line">#Skype: skype:yourname?call|chat || fab fa-skype</span><br></pre></td></tr></table></figure>

<p>4.捐赠</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># Donate (Sponsor) settings</span><br><span class="line"># Front-matter variable (nonsupport animation).</span><br><span class="line">reward_settings:</span><br><span class="line">  # If true, a donate button will be displayed in every article by default.</span><br><span class="line">  enable: false</span><br><span class="line">  animation: false</span><br><span class="line">  #comment: Buy me a coffee</span><br><span class="line"></span><br><span class="line">reward:</span><br><span class="line">#wechatpay: /images/wechatpay.png</span><br><span class="line">#alipay: /images/alipay.png</span><br><span class="line">#paypal: /images/paypal.png</span><br><span class="line">#bitcoin: /images/bitcoin.png</span><br></pre></td></tr></table></figure>
<p>5.Follow Me</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># Subscribe through Telegram Channel, Twitter, etc.</span><br><span class="line"># Usage: `Key: permalink || icon` (Font Awesome)</span><br><span class="line">follow_me:</span><br><span class="line">#Twitter: https://twitter.com/username || fab fa-twitter</span><br><span class="line">#Telegram: https://t.me/channel_name || fab fa-telegram</span><br><span class="line">#WeChat: /images/wechat_channel.jpg || fab fa-weixin</span><br><span class="line">#RSS: /atom.xml || fa fa-rss</span><br><span class="line"></span><br><span class="line"># `Follow me on GitHub` banner in the top-right corner.</span><br><span class="line">github_banner:</span><br><span class="line">  enable: false</span><br><span class="line">  permalink: https://github.com/yourname</span><br><span class="line">  title: Follow me on GitHub</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>6.SEO设置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># SEO Settings</span><br><span class="line"># See: https://theme-next.js.org/docs/theme-settings/seo</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># If true, site-subtitle will be added to index page.</span><br><span class="line"># Remember to set up your site-subtitle in Hexo `_config.yml` (e.g. subtitle: Subtitle)</span><br><span class="line">index_with_subtitle: false</span><br><span class="line"></span><br><span class="line"># Automatically add external URL with Base64 encrypt &amp; decrypt.</span><br><span class="line">exturl: false</span><br><span class="line"># If true, an icon will be attached to each external URL</span><br><span class="line">exturl_icon: true</span><br><span class="line"></span><br><span class="line"># Google Webmaster tools verification.</span><br><span class="line"># See: https://developers.google.com/search</span><br><span class="line">google_site_verification:</span><br><span class="line"></span><br><span class="line"># Bing Webmaster tools verification.</span><br><span class="line"># See: https://www.bing.com/webmasters</span><br><span class="line">bing_site_verification:</span><br><span class="line"></span><br><span class="line"># Yandex Webmaster tools verification.</span><br><span class="line"># See: https://webmaster.yandex.ru</span><br><span class="line">yandex_site_verification:</span><br><span class="line"></span><br><span class="line"># Baidu Webmaster tools verification.</span><br><span class="line"># See: https://ziyuan.baidu.com/site</span><br><span class="line">baidu_site_verification:</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>7.博客评论设置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Comments Settings</span><br><span class="line"># See: https://theme-next.js.org/docs/third-party-services/comments</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Multiple Comment System Support</span><br><span class="line">comments:</span><br><span class="line">  # Available values: tabs | buttons</span><br><span class="line">  style: tabs</span><br><span class="line">  # Choose a comment system to be displayed by default.</span><br><span class="line">  # Available values: disqus | disqusjs | changyan | livere | gitalk | utterances</span><br><span class="line">  active:</span><br><span class="line">  # Setting `true` means remembering the comment system selected by the visitor.</span><br><span class="line">  storage: true</span><br><span class="line">  # Lazyload all comment systems.</span><br><span class="line">  lazyload: false</span><br><span class="line">  # Modify texts or order for any naves, here are some examples.</span><br><span class="line">  nav:</span><br><span class="line">  #disqus:</span><br><span class="line">  #  text: Load Disqus</span><br><span class="line">  #  order: -1</span><br><span class="line">  #gitalk:</span><br><span class="line">  #  order: -2</span><br><span class="line"> </span><br><span class="line"># Gitalk</span><br><span class="line"># For more information: https://gitalk.github.io</span><br><span class="line">gitalk:</span><br><span class="line">  enable: false</span><br><span class="line">  github_id: # GitHub repo owner</span><br><span class="line">  repo: # Repository name to store issues</span><br><span class="line">  client_id: # GitHub Application Client ID</span><br><span class="line">  client_secret: # GitHub Application Client Secret</span><br><span class="line">  admin_user: # GitHub repo owner and collaborators, only these guys can initialize gitHub issues</span><br><span class="line">  distraction_free_mode: true # Facebook-like distraction free mode</span><br><span class="line">  # When the official proxy is not available, you can change it to your own proxy address</span><br><span class="line">  proxy: https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token # This is official proxy address</span><br><span class="line">  # Gitalk&#x27;s display language depends on user&#x27;s browser or system environment</span><br><span class="line">  # If you want everyone visiting your site to see a uniform language, you can set a force language value</span><br><span class="line">  # Available values: en | es-ES | fr | ru | zh-CN | zh-TW</span><br><span class="line">  language:</span><br></pre></td></tr></table></figure>

<p>8.博客分析</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Statistics and Analytics</span><br><span class="line"># See: https://theme-next.js.org/docs/third-party-services/statistics-and-analytics</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Google Analytics</span><br><span class="line"># See: https://analytics.google.com</span><br><span class="line">google_analytics:</span><br><span class="line">  tracking_id: # &lt;app_id&gt;</span><br><span class="line">  # By default, NexT will load an external gtag.js script on your site.</span><br><span class="line">  # If you only need the pageview feature, set the following option to true to get a better performance.</span><br><span class="line">  only_pageview: false</span><br><span class="line"></span><br><span class="line"># Baidu Analytics</span><br><span class="line"># See: https://tongji.baidu.com</span><br><span class="line">baidu_analytics: # &lt;app_id&gt;</span><br><span class="line"></span><br><span class="line"># Growingio Analytics</span><br><span class="line"># See: https://www.growingio.com</span><br><span class="line">growingio_analytics: # &lt;project_id&gt;</span><br><span class="line"></span><br><span class="line"># Cloudflare Web Analytics</span><br><span class="line"># See: https://www.cloudflare.com/web-analytics/</span><br><span class="line">cloudflare_analytics:</span><br><span class="line"></span><br><span class="line"># Show number of visitors of each article.</span><br><span class="line"># You can visit https://www.leancloud.cn to get AppID and AppKey.</span><br><span class="line">leancloud_visitors:</span><br><span class="line">  enable: false</span><br><span class="line">  app_id: # &lt;your app id&gt;</span><br><span class="line">  app_key: # &lt;your app key&gt;</span><br><span class="line">  # Required for apps from CN region</span><br><span class="line">  server_url: # &lt;your server url&gt;</span><br><span class="line">  # Dependencies: https://github.com/theme-next/hexo-leancloud-counter-security</span><br><span class="line">  # If you don&#x27;t care about security in leancloud counter and just want to use it directly</span><br><span class="line">  # (without hexo-leancloud-counter-security plugin), set `security` to `false`.</span><br><span class="line">  security: true</span><br><span class="line"></span><br><span class="line"># Another tool to show number of visitors to each article.</span><br><span class="line"># Visit https://console.firebase.google.com/u/0/ to get apiKey and projectId.</span><br><span class="line"># Visit https://firebase.google.com/docs/firestore/ to get more information about firestore.</span><br><span class="line">firestore:</span><br><span class="line">  enable: false</span><br><span class="line">  collection: articles # Required, a string collection name to access firestore database</span><br><span class="line">  apiKey: # Required</span><br><span class="line">  projectId: # Required</span><br><span class="line"></span><br><span class="line"># Show Views / Visitors of the website / page with busuanzi.</span><br><span class="line"># For more information: http://ibruce.info/2015/04/04/busuanzi/</span><br><span class="line">busuanzi_count:</span><br><span class="line">  enable: false</span><br><span class="line">  total_visitors: true</span><br><span class="line">  total_visitors_icon: fa fa-user</span><br><span class="line">  total_views: true</span><br><span class="line">  total_views_icon: fa fa-eye</span><br><span class="line">  post_views: true</span><br><span class="line">  post_views_icon: far fa-eye</span><br></pre></td></tr></table></figure>

<p>9.搜索服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Search Services</span><br><span class="line"># See: https://theme-next.js.org/docs/third-party-services/search-services</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Algolia Search</span><br><span class="line"># For more information: https://www.algolia.com</span><br><span class="line">algolia_search:</span><br><span class="line">  enable: false</span><br><span class="line">  hits:</span><br><span class="line">    per_page: 10</span><br><span class="line"></span><br><span class="line"># Local Search</span><br><span class="line"># Dependencies: https://github.com/next-theme/hexo-generator-searchdb</span><br><span class="line">local_search:</span><br><span class="line">  enable: false</span><br><span class="line">  # If auto, trigger search by changing input.</span><br><span class="line">  # If manual, trigger search by pressing enter key or search button.</span><br><span class="line">  trigger: auto</span><br><span class="line">  # Show top n results per article, show all results by setting to -1</span><br><span class="line">  top_n_per_article: 1</span><br><span class="line">  # Unescape html strings to the readable one.</span><br><span class="line">  unescape: false</span><br><span class="line">  # Preload the search data when the page loads.</span><br><span class="line">  preload: false</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://louischerry.github.io/2022/01/11/2022-01-11-mysql%E4%B8%8D%E5%90%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%B4%A2%E5%BC%95%E7%9A%84%E5%AE%9E%E8%B7%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LouisCherry">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LouisCherry's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/11/2022-01-11-mysql%E4%B8%8D%E5%90%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%B4%A2%E5%BC%95%E7%9A%84%E5%AE%9E%E8%B7%B5/" class="post-title-link" itemprop="url">mysql不同数据结构索引的实践</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-01-11 22:34:17" itemprop="dateCreated datePublished" datetime="2022-01-11T22:34:17+08:00">2022-01-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-01-17 11:41:33" itemprop="dateModified" datetime="2022-01-17T11:41:33+08:00">2022-01-17</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">-- 创建基于Memory引擎的表</span><br><span class="line">CREATE TABLE mymemory (</span><br><span class="line">id INT,</span><br><span class="line">c1 VARCHAR ( 10 ),</span><br><span class="line">c2 CHAR ( 10 )</span><br><span class="line">) ENGINE = memory;</span><br><span class="line"></span><br><span class="line">-- Memory引擎，默认索引类型是hash</span><br><span class="line">create index idx_c1 on mymemory(c1);</span><br><span class="line"></span><br><span class="line">-- 创建Btree类型索引</span><br><span class="line">create index idx_c2 using btree on mymemory(c2);</span><br><span class="line"></span><br><span class="line">-- 查看当前的索引类型</span><br><span class="line">show index from mymemory;</span><br><span class="line"></span><br><span class="line">-- 插入测试数据</span><br><span class="line">INSERT into mymemory(id,c1,c2) values(1,SUBSTR(UUID(),1,10),SUBSTR(UUID(),1,10));</span><br><span class="line">INSERT into mymemory(id,c1,c2) values(2,SUBSTR(UUID(),1,10),SUBSTR(UUID(),1,10));</span><br><span class="line">INSERT into mymemory(id,c1,c2) values(3,SUBSTR(UUID(),1,10),SUBSTR(UUID(),1,10));</span><br><span class="line">INSERT into mymemory(id,c1,c2) values(4,SUBSTR(UUID(),1,10),SUBSTR(UUID(),1,10));</span><br><span class="line">INSERT into mymemory(id,c1,c2) values(5,SUBSTR(UUID(),1,10),SUBSTR(UUID(),1,10));</span><br><span class="line">INSERT into mymemory(id,c1,c2) values(6,SUBSTR(UUID(),1,10),SUBSTR(UUID(),1,10));</span><br><span class="line">INSERT into mymemory(id,c1,c2) values(7,SUBSTR(UUID(),1,10),SUBSTR(UUID(),1,10));</span><br><span class="line">INSERT into mymemory(id,c1,c2) values(8,SUBSTR(UUID(),1,10),SUBSTR(UUID(),1,10));</span><br><span class="line">INSERT into mymemory(id,c1,c2) values(9,SUBSTR(UUID(),1,10),SUBSTR(UUID(),1,10));</span><br><span class="line"></span><br><span class="line">-- Hash值没有顺序：不能范围查询以及排序操作；</span><br><span class="line">EXPLAIN SELECT * from mymemory where c1&gt;&#x27;a&#x27; and c1&lt;&#x27;d&#x27;;</span><br><span class="line">![](../images/2022-01-11/2022-01-11-001.png)</span><br><span class="line"></span><br><span class="line">EXPLAIN SELECT * from mymemory where c2&gt;&#x27;a&#x27; and c2&lt;&#x27;d&#x27;;</span><br><span class="line">![](../images/2022-01-11/2022-01-11-002.png)</span><br><span class="line"></span><br><span class="line">-- 都未走索引</span><br><span class="line">EXPLAIN SELECT * from mymemory ORDER BY c1;</span><br><span class="line">EXPLAIN SELECT * from mymemory ORDER BY c2;</span><br><span class="line"></span><br><span class="line">-- TODO Hash不能使用最左前缀原则进行优化；</span><br><span class="line">-- TODO Hash冲突导致性能底下。</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LouisCherry</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
